{% extends 'base.html' %}
{% load static thumbnail crispy_forms_tags %}
{% block meta %}
    <meta name="description" content="{{ title_for_meta }} {{ object.meta_title }}">
    <title>{{ title_for_meta }} {{ object }}</title>
{% endblock %}
{% block modal-search %}
    <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="header-form modal-dialog" role="document">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-content">
                <div class="modal-body">
                    <form action="#">
                        <div class="form-cont flex">
                            <div class="location">
                                <label>
                                    Место отдыха?<br>
                                    <input type="text" placeholder="Курорт или отель">
                                </label>
                            </div>
                            <div class="enter">
                                <label>
                                    Заезд<br>
                                    <input type="text" placeholder="Дата" class="datepicker">
                                </label>
                            </div>
                            <div class="exit">
                                <label>
                                    Выезд<br>
                                    <input type="text" placeholder="Дата" class="datepicker">
                                </label>
                            </div>
                            <div class="guest-count">
                                <label>
                                    Количество гостей<br>
                                    <input type="text" placeholder="Кто поедет?">
                                </label>
                            </div>
                            <button class="submit">найти</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-filter">
        <div class="closeModalFilter">X</div>
    </div>
    <div class="modal-map">
        <div class="closeModalMap">X</div>
    </div>
    <div class="modal fade" id="searchModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="header-form modal-dialog" role="document">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-content">
                <div class="modal-body">
                    <form action="#">
                        <div class="form-cont flex">
                            <div class="location">
                                <label>
                                    Место отдыха?<br>
                                    <input type="text" placeholder="Курорт или отель">
                                </label>
                            </div>
                            <div class="enter">
                                <label>
                                    Заезд<br>
                                    <input type="text" placeholder="Дата" class="datepicker">
                                </label>
                            </div>
                            <div class="exit">
                                <label>
                                    Выезд<br>
                                    <input type="text" placeholder="Дата" class="datepicker">
                                </label>
                            </div>
                            <div class="guest-count">
                                <label>
                                    Количество гостей<br>
                                    <input type="text" placeholder="Кто поедет?">
                                </label>
                            </div>
                            <button class="submit">найти</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="mapModal" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
         aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <img aria-hidden="true" src="{% static 'img/closeButton.png' %}" alt="">
                </button>
                <div class="modal-left"></div>
                <div class="modal-right">
                    <p>Найдено вариантов: {{ object.hotel_set.all.count }}</p>
                    <div class="modal-right-map">
                        <iframe src="https://yandex.ru/map-widget/v1/?um=constructor%3Ac23bdef087fe608794a36ef27292433bc7fe9c307163ffc170fb8fd2f6937c7f&amp;source=constructor"
                                width=" 848
                        " height="400" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block header %}
    <header id="curorts">
        <div class="container">
            {% include 'include/main-menu.html' %}
            <ul class="breadcrumb">
                <li><a href="/">Главная</a></li>
                {% if object.parent.parent %}
                    <li>
                        <a href="{% url 'region:region_detail' slug=object.parent.parent.slug %}">{{ object.parent.parent }}</a>
                    </li>
                    <li>{{ title_for_meta }}</li>
                {% else %}
                    <li>{{ object }}</li>
                {% endif %}
            </ul>
            <div class="headerTitle">
                <h1>{{ title_for_meta }} {{ object }}</h1>
                <p class="search-result">{{ region_list }} Найдено объектов {{ hotel_list.count }}</p>
                <p>{{ title_for_meta }} {{ object }}</p>
            </div>
            <button class="hidden-find" data-toggle="modal" data-target="#searchModal1">найти курорт</button>
            <div class="header-form">
                {% include 'include/form_search.html' %}
            </div>
        </div>
    </header>
{% endblock %}
{% block content %}
    <!--SECTION AVERAGE VALUE-->
    <section class="curortSection1">
        <div class="container relative">
            <div class="curortSection1-cont">
                <div class="flex">
                    <div class="curort-icons flex mr-50">
                        <div class="curort-price-left">
                            <img src="{% static 'img/wallet.svg' %}" alt="">
                        </div>
                        <div class="curort-price-right">
                            <p>Средняя цена</p>
                            <p>{{ object.get_average_price|floatformat:"0" }} руб. / {{ today|date:"F" }}</p>
                        </div>
                    </div>
                    <div class="curort-icons flex mr-50">
                        <div class="curort-price-left">
                            <img src="{% static 'img/calendar.svg' %}" alt="">
                        </div>
                        <div class="curort-price-right">
                            <p>Сезон</p>
                            <p>{{ object.season }}</p>
                        </div>
                    </div>
                    <div class="curort-icons flex mr-50">
                        <div class="curort-price-left">
                            <img src="{% static 'img/middle.svg' %}" alt="">
                        </div>
                        <div class="curort-price-right">
                            <p>Среняя оценка</p>
                            <p>{{ object.get_average_review|floatformat:"0" }} на основе отзывов</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--END SECTION AVERAGE VALUE-->

    <!--SECTION FILTER-->
    <section class="curortSection2">
        <div class="container">
            <div class="curort-filter">
                <div class="row">
                    <div class="col-md-3">
                        <div class="curort-filter-map">
                            <div class="little-map">
                                <div class="little-map-div flex alignCenter juatifyCenter">
                                    <button class="show-map" data-toggle="modal" data-target=".bd-example-modal-lg">
                                        Показать на карте
                                    </button>
                                </div>
                            </div>
                            {% crispy filter %}
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="filter-select-cont">
                            <div class="show-map-responciv">
                                <button class="show-filter">Фильтры</button>
                                <button class="show-little-map">Показать на карте</button>
                            </div>
                            <div class="filter-select">
                                <div class="dropdown">
                                    <div class="dropbtn"><span>Популярное</span> <img
                                            src="{% static 'img/deopdown-img.png' %}"
                                            alt="">
                                    </div>
                                    <div class="dropdown-content">
                                        <a href="">тип пляжа 1</a>
                                        <a href="">тип пляжа 2</a>
                                        <a href="">тип пляжа 3</a>
                                        <a href="">тип пляжа 4</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="my-object-card-cont curort-card-cont">
                            {% for hotel in hotel_list %}
                                <div class="my-object-card flex mt-30">
                                    <div class="card-image">
                                        <div class="owl-admin" class="owl-carousel">
                                            {% for image in hotel.hotelphoto_set.all %}
                                                <a href="{% url 'region:hotel_detail' slug=object.slug pk=hotel.id %}"
                                                   title="{{ item }}">
                                                    <div class="item">
                                                        <div class="item-img">
                                                            {% thumbnail image.image "262x180" crop='center' as im %}
                                                                <img class="lazyOwl"
                                                                     data-src="{{ im.url }}" width="{{ im.width }}"
                                                                     height="{{ im.height }}"
                                                                     alt="{{ hotel }}">
                                                            {% endthumbnail %}
                                                        </div>
                                                    </div>
                                                </a>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="card-body curort-card flex  juatifyBetween">
                                        <div class="card-body-left flex directionColumn juatifyBetween">
                                            <div class="card-body-cont">
                                                <a href="{% url 'region:hotel_detail' slug=object.slug pk=hotel.id %}"
                                                   title="{{ item }}"><p>{{ hotel }}</p></a>
                                                <p class="card-location">{{ hotel.city }}, {{ hotel.address }}</p>
                                                <p class="card-distance">Море - {{ hotel.remoteness }} м • Центр -
                                                    3,9
                                                    км</p>
                                            </div>
                                            <div data-id="{{ hotel.id }}"
                                                 data-action="bookmark" data-url="{{ request.path }}"
                                                 title="Избранное" id="favorite-img">
                                                <a href="#">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                              d="M0 8.88595C0 5.09693 3.10038 2 6.89362 2C8.91634 2 10.747 2.85127 12 4.25509C13.253 2.85127 15.0837 2 17.1064 2C20.8996 2 24 5.09693 24 8.88595C24 10.6464 23.1963 12.3351 22.0964 13.8334C20.9906 15.3396 19.5329 16.7249 18.1021 17.8943C16.6674 19.0668 15.2366 20.0409 14.1665 20.7211C13.6308 21.0617 13.1836 21.3297 12.8692 21.5133C12.712 21.605 12.5878 21.6758 12.5023 21.7239C12.4595 21.748 12.4263 21.7665 12.4035 21.7791L12.3772 21.7936L12.3699 21.7976L12.3678 21.7987C12.3676 21.7989 12.3668 21.7993 12 21.1276C11.6309 21.798 11.6307 21.7979 11.6305 21.7978L11.6277 21.7963L11.6205 21.7923L11.5942 21.7777C11.5714 21.765 11.5383 21.7464 11.4955 21.7221C11.41 21.6736 11.2859 21.6024 11.1287 21.51C10.8144 21.3251 10.3674 21.0554 9.83172 20.7128C8.7619 20.0288 7.33143 19.05 5.89714 17.8745C4.46665 16.7021 3.00941 15.3156 1.90397 13.8124C0.804793 12.3177 0 10.6349 0 8.88595ZM12 21.1276L11.6305 21.7978L11.9985 22L12.3668 21.7993L12 21.1276ZM12.0014 20.2472C12.0314 20.2299 12.063 20.2115 12.0962 20.1921C12.3962 20.017 12.8267 19.759 13.3441 19.4301C14.3804 18.7714 15.7581 17.8328 17.132 16.71C18.5096 15.5841 19.8604 14.2914 20.8611 12.9285C21.8675 11.5576 22.4681 10.186 22.4681 8.88595C22.4681 5.94204 20.0536 3.53021 17.1064 3.53021C15.2222 3.53021 13.5772 4.46885 12.6462 5.93025L12 6.9446L11.3538 5.93025C10.4228 4.46885 8.77776 3.53021 6.89362 3.53021C3.94643 3.53021 1.53191 5.94204 1.53191 8.88595C1.53191 10.172 2.13138 11.5368 3.13859 12.9065C4.13952 14.2676 5.4908 15.5621 6.86882 16.6915C8.24304 17.8177 9.62108 18.7612 10.6576 19.4241C11.1752 19.755 11.6058 20.0148 11.9058 20.1912C11.9394 20.211 11.9713 20.2296 12.0014 20.2472Z"
                                                              fill="#6A6D81"></path>
                                                    </svg>
                                                </a>
                                            </div>
                                            <div class="black-sea-icon flex">
                                                {% for option in hotel.options.all|slice:":3" %}
                                                    <span>{{ option }}</span>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="card-body-right-button flex directionColumn juatifyBetween">
                                            <div class="curort-price">
                                                <div class="curort-price-cont">
                                                    <div class="curort-price1 cur1">
                                                        от {{ hotel.get_min_price }} руб.
                                                    </div>
                                                    <div class="curort-price2">за 1 сутки</div>
                                                </div>
                                                <div class="curort-price3">
                                                    <img src="{% static 'img/curort-icon1.png' %}" alt="">
                                                    <span>отзывов {{ hotel.hotelreview_set.all.count }} </span>
                                                </div>

                                            </div>
                                            <a href="{% url 'region:hotel_detail' slug=object.slug pk=hotel.id %}">
                                                <button class="show-price">Показать цены</button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                            <button class="open-more">Открыть ещё 20 объектов</button>
                        </div>
                    </div>
                    <div class="curort-filter-map">
                        <h3 class="mt-20">Курорты рядом</h3>
                        <div>
                            {% for region in region_parent_list %}
                                <ul class="">
                                    <li class="td-title custom-control">
                                        <p>{{ region }} 33 км</p>
                                        <ul>
                                            {% get_type_of_object region as type_object_list %}
                                            {% for type_object, count in type_object_list.items %}
                                                <li class="custom-control"><a class="advance-link"
                                                                              href="{% url 'region:hotel_type_filter' slug=region.slug type_slug=type_object.slug %}">
                                                    {{ type_object }}</a> <span class="light">{{ count }}</span>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                </ul>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--END SECTION FILTER-->

    <!--SECTION FACILITIES-->
    <section>
        <div class="container">
            <div class="travel curort-travel mt-100">
                <h2>Объекты <span>по критериям удобства</span></h2>
                <div class="owl-demo-object owl-carousel">
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-1.png' %}" data-src="{% static 'img/object-1.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>Недорого</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-2.png' %}" data-src="{% static 'img/object-2.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>У моря</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-3.png' %}" data-src="{% static 'img/object-3.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>В центре</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-4.png' %}" data-src="{% static 'img/object-4.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>С детьми</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-5.png' %}" data-src="{% static 'img/object-5.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>С бассейном</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-6.png' %}" data-src="{% static 'img/object-6.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>С питанием</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-1.png' %}" data-src="{% static 'img/object-1.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>Недорого</p>
                    </div>
                    <div class="item">
                        <a href="">
                            <div class="item-img">
                                <img class="lazyOwl" src="{% static 'img/object-2.png' %}" data-src="{% static 'img/object-2.png' %}" alt="Lazy Owl Image">
                            </div>
                        </a>
                        <p>У моря</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END SECTION FACILITIES-->

    <!--SECTION REVIEWS-->
    <section>
        <div class="container">
            <div class="curort-feedback">
                {% if review_list %}
                    <h2>Последние <span>отзывы</span></h2>
                    <div class="owl-carousel curort-feedback-cont">
                        {% for item in review_list %}
                            <div class="item">
                                <div class="curort-feedback-item">
                                    <p class="feedback-title">{{ item }}</p>
                                    <p class="feedback-periud">Период отдыха: {{ item.period }}</p>
                                    <p class="feedback-name">{{ item.name }}</p>
                                    <p class="feedback-rate">
                                        <img src="{% static 'img/ratefill.png' %}" alt="">
                                        <img src="{% static 'img/ratefill.png' %}" alt="">
                                        <img src="{% static 'img/ratefill.png' %}" alt="">
                                        <img src="{% static 'img/ratefill.png' %}" alt="">
                                        <img src="{% static 'img/rateempty.png' %}" alt="">
                                    </p>
                                    <p class="feedback-text ul-fixed-height2"> {{ item.text }} </p>
                                    <p class="showmore2">Показать полностью <i class="fa fa-angle-down"></i></p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
    <!--END SECTION REVIEWS-->

    <!--SECTION OBJECTS NEAR-->
    <section>
        <div class="container">
            <div class="closert-curorts">
                {% if curort_near_list %}
                    <h2>Курорты <span>рядом</span></h2>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="closest-cont">
                                <img src="{% static 'img/closest-img.png' %}" alt="">
                                <p class="closest-distance"><img src="{% static 'img/closest-location.png' %}"
                                                                 alt="">
                                    <span>350 км</span>
                                </p>
                                <p class="closets-name">Красная поляна</p>
                                <p class="closest-text">от 800 руб. за человека всутки</p>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="closest-cont">
                                <img src="{% static 'img/closest-img.png' %}" alt="">
                                <p class="closest-distance"><img src="{% static 'img/closest-location.png' %}"
                                                                 alt="">
                                    <span>350 км</span>
                                </p>
                                <p class="closets-name">Красная поляна</p>
                                <p class="closest-text">от 800 руб. за человека всутки</p>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="closest-cont">
                                <img src="{% static 'img/closest-img.png' %}" alt="">
                                <p class="closest-distance"><img src="{% static 'img/closest-location.png' %}"
                                                                 alt="">
                                    <span>350 км</span>
                                </p>
                                <p class="closets-name">Красная поляна</p>
                                <p class="closest-text">от 800 руб. за человека всутки</p>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>

    </section>
    <!--END SECTION OBJECTS NEAR-->

{% endblock %}
